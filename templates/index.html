<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>IDS User Study</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <style>
        html,
        body {
            font-family: Arial, Helvetica, sans-serif;
        }

        .page {
            margin: 40px auto;
            width: 900px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <!-- INTRODUCTION PART : Shown first -->
    <div class="intro page">
        <h1> Testing User Experience of Reading Article on the Web </h1>
        <p style="width: 600px; font-size: 12pt; line-height: 1.5">
          In this survey, you will read an article and give
          This study aims to collect your <b>subjective</b> responses to several questions after reading a snippet of web article. <br>
          Before start reading and survey, <b>Please be prepared by following the tutorial below.</b><br>
          While reading an article and having quiz session, <b>please don't try 'go to previous page'</b>. This survey will give you only one chance to read the article.<br>
          Once you reach the quiz page, please fill out all qustionnaires without too long consideration and make sure you click the submit button.<br>
          Thank you for your participation.
          <br><br><br>
          If you made all part of guideline visible, <br> please click the 'Start Task' button and start the session.
        </p>
        <script>
            function start() {
                log('start');
                document.location.href = "../story";
            }
        </script>
        <button onclick="start()">
            Start Task
        </button>
        <hr/>
        <div style="position: relative; height: 800px">
          <div style="position: absolute; text-align: center; left: calc(450px - 685px); font-size: 16pt; width: 1370px; height: 700px; border: 1mm dashed rgba(211, 220, 50, 1.0); margin: 20px 0 50px 0;">
            <br/> Please resize your browser or use zoom('ctrl' + '+ or -') to accomplish the instruction.
          </div>
        </div>
    </div>
</body>


<script>
    let stories; // This will contain three(?) stories for the current participant.
    let storyIdx = 0; // Index number of the current story

    $.ready(() => {
        $(".page").addClass("hidden");
        $(".intro").removeClass("hidden");
    });

    function ajaxGet(reqJson, callback) {
        /* Example usage.
          ajaxGet({"action":"add", "JSON":JSON.stringify({'a':1234,'b':234})})
        */
        $.getJSON('ajaxGet', reqJson, callback);
    }

    function fetchStories() {
        // This method will be called once, when a new participant begins
        ajaxGet({
            "action": "fetchStories"
        }, (data) => {
            stories = data.stories;
        });
    }

    function renderStoryAndQuestion(si) {
        // For the given story index (si), it renders the story and question in the corresponding div
        $(".story_content").html(stories(si).story.html);
        $(".quiz_content").html(stories(si).quiz.html);

        // Showing the story page only
        $(".page").addClass("hidden");
        $(".story").removeClass("hidden");
    }

    function proceedToQuiz() {
        $(".page").addClass("hidden");
        $(".quiz").removeClass("hidden");
    }

    function proceedToNextStory() {
        storyIdx++;
        if (storyIdx == stories.length) {
            proceedToPostQuestionnaire();
        } else {
            renderStoryAndQuestion(storyIdx);
        }
    }

    function proceedToPostQuestionnaire() {
        $(".page").addClass("hidden");
        $(".post").removeClass("hidden");
    }

    function proceedToBye() {

    }

    function log(e) {
        if (e == "start") {
            // Pressing Start button
            let jsonString = JSON.stringify({
                "event": "Start Button"
            });
            ajaxGet({
                "action": "log",
                "JSON": jsonString
            }, (data) => {
                console.log(data);
            });
        } else if (e == "a specific event") {
            // DEFINE WHAT TO LOG
        } else if (e == "another specific event") {
            // DEFINE WHAT TO LOG
        }
    }

</script>

</html>
